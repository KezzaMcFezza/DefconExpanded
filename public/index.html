<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEFCON Expanded: A DEFCON Modding Community</title>
    <meta name="description" content="DEFCON Expanded: The Home for DEFCON Mods and Demos">
    <meta name="keywords" content="Defcon, game demos, Defcon Expanded, modding community, demo downloads, Defcon news, 8 Player, 10 Player, 16 Player, Dedcon, Octocon">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://defconexpanded.com" />
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://defconexpanded.com">
    <meta property="og:title" content="DEFCON Expanded: A DEFCON Modding Community">
    <meta property="og:description" content="Defcon Expanded: The Home for DEFCON Mods and Demos">
    <meta property="og:image" content="https://defconexpanded.com/images/newdefconexpanded.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://defconexpanded.com">
    <meta name="twitter:title" content="DEFCON Expanded: A DEFCON Modding Community">
    <meta name="twitter:description" content="DEFCON Expanded: The Home for DEFCON Mods and Demos">
    <meta name="twitter:image" content="https://defconexpanded.com/images/newdefconexpanded.png">
    <link rel="icon" type="image/x-icon" href="https://defconexpanded.com/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="https://defconexpanded.com/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://defconexpanded.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://defconexpanded.com/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://defconexpanded.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://defconexpanded.com/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://defconexpanded.com/android-chrome-512x512.png">
    <link rel="manifest" href="https://defconexpanded.com/site.webmanifest">
    <link rel="mask-icon" href="https://defconexpanded.com/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://defconexpanded.com/style.css" />
    <link rel="stylesheet" type="text/css" href="https://defconexpanded.com/main.css" />
    <link rel="stylesheet" type="text/css" href="https://defconexpanded.com/media.css" />
    <link rel="stylesheet" type="text/css" href="https://defconexpanded.com/btnnav.css" />
    <link rel="stylesheet" type="text/css" href="https://defconexpanded.com/scaling.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .game-type {
            color: #fff;
            padding: 5px;
            margin-top: 0;
        }
        .time-info {
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .game-results {
            width: 80%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        .game-results th, .game-results td {
            border: 1px solid #333;
            padding: 5px;
            text-align: left;
        }
        .btn-download {
            background-color: #4CAF50;
        }
        .btn-matchroom {
            background-color: #008CBA;
        }
    </style>
</head>
<body class="hide-scrollbar">
    <header>
        <div class="bannerdivclass">
            <div class="logodivclass"></div>
        </div>
    </header>
    <nav>
        <a class="btn-third foo" href="https://defconexpanded.com/">Homepage</a>
        <a class="btn-third foo" href="https://defconexpanded.com/about">About</a>
        <a class="btn-third foo" href="https://defconexpanded.com/news">News</a>
        <a class="btn-third foo" href="https://defconexpanded.com/media">Media</a>
        <a class="btn-third foo" href="https://defconexpanded.com/resources">Downloads</a>
        <a class="btn-third foo" href="https://defconexpanded.com/experimental">Experimental</a>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search...">
            <button id="search-button">Search</button>
        </div>
    </nav>
    <div class="container-homepage hide-scrollbar">
        <div class="center-column">
            <h1>REcENtly PlayEd GamEs</h1>
            <div class="games-played" id="games-played">Total GamEs PlayEd: 0</div>
            <p class="pabout2">This part of the website is just for demonstration purposes until we can implement Dedcon into the modded builds, 
                              so what you see here is a concept and is not final.</p>
            <br>
            <div class="search-container2">
                <input type="text" id="search-input2" placeholder="Search for Games and Players...">
                <button id="search-button2">Search</button>
            </div>
            <div id="demo-container" class="demo-container">
            </div>
            <br>
            <div class="pagination" id="pagination">
            </div>
            <br>
            <br>
        </div>
    </div>
<script>
    let allDemos = []; 
    
    function formatBytes(bytes, decimals = 2) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    }
    
    function updatePagination(totalPages, currentPage) {
        const paginationContainer = document.getElementById('pagination');
        paginationContainer.innerHTML = '';
    
        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('button');
            pageButton.textContent = i;
            if (i === currentPage) {
                pageButton.disabled = true;
            }
            pageButton.addEventListener('click', () => showPage(i, allDemos));
            paginationContainer.appendChild(pageButton);
        }
    }
    
    function showPage(pageNumber, demos) {
        const demosPerPage = 6;
        const start = (pageNumber - 1) * demosPerPage;
        const end = start + demosPerPage;
        const demoContainer = document.getElementById('demo-container');
        demoContainer.innerHTML = ''; 
    
        demos.slice(start, end).forEach(demo => {
            const demoCard = createDemoCard(demo);
            demoContainer.appendChild(demoCard);
        });
    
        updatePagination(Math.ceil(demos.length / demosPerPage), pageNumber);
    }
    
    function createDemoCard(demo) {
        const demoCard = document.createElement('div');
        demoCard.className = 'demo-card';
        demoCard.innerHTML = `
            <div class="demo-content">
                <h3 class="game-type">${demo.name}</h3>
                <p class="time-info">
                    <span class="time-ago">${getTimeAgo(demo.date)}</span><br>
                    <span class="game-time">${getGameTime(demo.date)}</span><br>
                    <span class="game-date">${new Date(demo.date).toLocaleDateString()}</span>
                    <span class="game-duration">(${getDuration(demo.size)})</span>
                </p>
                <table class="game-results">
                    <tr>
                        <th>Player</th>
                        <th>Territory</th>
                        <th>Score</th>
                    </tr>
                    ${getPlayerData(demo.name)}
                </table>
                <a href="https://defconexpanded.com/download/${demo.name}" class="btn-download foo">
                    <img src="https://defconexpanded.com/images/dedcon.ico" alt="" class="download-icon"> Download
                </a>
                <a href="https://defconexpanded.com/homepage/matchroom" class="btn-matchroom foo"> Matchroom </a>
            </div>
        `;
        return demoCard;
    }
    
    function getTimeAgo(date) {
        const seconds = Math.floor((new Date() - new Date(date)) / 1000);
        let interval = seconds / 31536000;
        if (interval > 1) return Math.floor(interval) + " years ago";
        interval = seconds / 2592000;
        if (interval > 1) return Math.floor(interval) + " months ago";
        interval = seconds / 86400;
        if (interval > 1) return Math.floor(interval) + " days ago";
        interval = seconds / 3600;
        if (interval > 1) return Math.floor(interval) + " hours ago";
        interval = seconds / 60;
        if (interval > 1) return Math.floor(interval) + " minutes ago";
        return Math.floor(seconds) + " seconds ago";
    }
    
    function getGameTime(date) {
        const gameDate = new Date(date);
        const startTime = gameDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
        gameDate.setMinutes(gameDate.getMinutes() + Math.floor(Math.random() * 60) + 15); // Random duration between 15-75 minutes
        const endTime = gameDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
        return `${startTime} — ${endTime}`;
    }
    
    function getDuration(size) {
        // Estimate duration based on file size (this is a rough approximation)
        const minutes = Math.max(15, Math.min(75, Math.floor(size / 1024 / 1024))); // 1 MB ≈ 1 minute, min 15, max 75
        return `${minutes} min`;
    }
    
    function getPlayerData(demoName) {
        // This is a placeholder. In a real scenario, you'd fetch this data from the server
        const players = [
            { name: "Player1", territory: "NA", score: Math.floor(Math.random() * 200) - 50 },
            { name: "Player2", territory: "EU", score: Math.floor(Math.random() * 200) - 50 },
            { name: "Player3", territory: "SA", score: Math.floor(Math.random() * 200) - 50 },
            { name: "Player4", territory: "RU", score: Math.floor(Math.random() * 200) - 50 },
        ];
        return players.map(player => `
            <tr>
                <td>${player.name}</td>
                <td>${player.territory}</td>
                <td>${player.score}</td>
            </tr>
        `).join('');
    }
    
    function updateDemoList() {
        fetch('https://defconexpanded.com/demos')
            .then(response => response.json())
            .then(demos => {
                allDemos = demos; 
                const gamesPlayed = document.getElementById('games-played');
                gamesPlayed.textContent = `Total GamEs PlayEd: ${demos.length}`;
                showPage(1, allDemos);
            })
            .catch(error => console.error('Error fetching demos:', error));
    }
    
    function performMainSearch() {
        const searchTerm = document.getElementById('search-input').value;
        if (searchTerm.trim() === '') return;
        window.location.href = `https://defconexpanded.com/searchresults.html?q=${encodeURIComponent(searchTerm)}`;
    }
    
    function performGameSearch() {
        const searchTerm = document.getElementById('search-input2').value.toLowerCase();
        const filteredDemos = allDemos.filter(demo => 
            demo.name.toLowerCase().includes(searchTerm) ||
            formatBytes(demo.size).toLowerCase().includes(searchTerm) ||
            new Date(demo.date).toLocaleDateString().toLowerCase().includes(searchTerm)
        );
        showPage(1, filteredDemos);
    }
    
    // New function to add JSON-LD
    function addJSONLD() {
        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.text = JSON.stringify({
            "@context": "https://schema.org",
            "@type": "WebSite",
            "url": "https://defconexpanded.com/",
            "name": "DEFCON Expanded: A DEFCON Modding Community",
            "description": "The Home for DEFCON Mods and Demos"
        });
        document.head.appendChild(script);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('search-button').addEventListener('click', performMainSearch);
        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performMainSearch();
            }
        });
        
        document.getElementById('search-button2').addEventListener('click', performGameSearch);
        document.getElementById('search-input2').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performGameSearch();
            }
        });
        
        updateDemoList();
        setInterval(updateDemoList, 30000);
        
        // Call the addJSONLD function when the DOM is loaded
        addJSONLD();
    });
</script>
</body>
</html>
<!--
Website Creators:
KezzaMcFezza
Devil
Nexustini
:)
-->
